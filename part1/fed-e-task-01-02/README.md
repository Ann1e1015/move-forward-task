# Part1-2 作业

( 请在当前文件直接作答 )

## 简答题

### 1. 请说出下列最终执行结果，并解释为什么?

```javascript
var a = [];
for(var i = 0; i < 10; i++) {
  a[i] = function() {
    console.log(i)
  }
}
a[6]()
```
**答** 结果为 10
    因为 a[6]() 为函数调用，该函数执行上下文为全局，在执行函数时，for 循环已经结束，i 为全局变量，已经变为10，函数中再取 i 时，函数中没有 i 声明，所以去外层也就是全局取，取到的是10，打印10。
　

　

### 2. 请说出此案列最终执行结果，并解释为什么?

```javascript
var tmp = 123;
if (true) {
  console.log(tmp);
  let tmp;
}
```
**答** 会报错，只要是let声明的变量，就会绑定在该作用块内（if 或者 for 语句），变量在还没有声明的时候使用就会报未声明的错误。

　

　

### 3. 结合ES6语法，用最简单的方式找出数组中的最小值

```javascript
var arr = [12, 34, 32, 89, 4]
```
**答**
Math.min(...arr)

　

### 4. 请详细说明var、let、const三种声明变量的方式之间的具体差别
**答**
*var：用 var 声明的变量在预编译的时候会提前声明，在函数执行阶段再进行赋值操作，所以在赋值前使用也不会报未声明错，因为该值已经声明但是没有赋值（值为undefined）。
*let：用 let 声明的变量会绑定当前块作用域，即使是 if 和 for 语句也会形成暂时性死区，只要在当前块作用域中，在声明前调用该变量就会报错，强制使用者在使用变量前声明变量，有助于养成良好的编码习惯。
*const：用 const 声明的是常量，特性和 let 相似，只不过 const 声明的常量地址不可以被修改（简单数据类型不可以改，复杂数据类型只要不改地址就不会报错）。
　

　

### 5. 请说出下列代码最终输出结果，并解释为什么？

```javascript
var a = 10;
var obj = {
  a: 20,
  fn() {
    setTimeout(() => {
      console.log(this.a)
    })
  }
}
obj.fn()
```
**答**
    会打印20，因为调用方法是对象调用，所以 fn 的 this 指向调用它的 obj，且倒计时里面是箭头函数，箭头函数的 this 指向为函数 fn 的 this 指向，所以 this.a 为 obj 对象的 a 属性值。

　

　

### 6. 简述Symbol类型的用途

**答**
    1. 为对象添加独一无二的属性名，解决用字符串作为键的值，在使用时会产生冲突的问题。
    2. 适合做私有属性，因为不能用for和keys来取Symbol属性名，stringify也会忽略Symbol。
　

　

### 7. 说说什么是浅拷贝，什么是深拷贝？

**答**
    
    *JavaScript的类型分为基本类型和引用类型。
    *浅拷贝：拷贝基本类型直接拷贝的是值，而拷贝引用类型的时候只拷贝地址，所以拷贝完成之后改变引用类型里面的值时候，会影响另一个对象里的值。
    *深拷贝：拷贝值得时候是开辟新的存储空间来存值，所以相互之间不会影响。
  
　

### 8. 请简述TypeScript与JavaScript之间的关系？

　
**答** 
    *TypeScript 是 JavaScript 的超集，TypeScript 在 JavaScript 的基础上多了类型系统和 ES6+ 的新特性，在编译的时候可以编译成纯 JS 代码（最低编译成ES3），类型系统可以避免很多编码错误。

### 9. 请谈谈你所认为的typescript优缺点

　
**答**
    *优点：1. TypeScript 在 JavaScript 的基础上多了类型系统和 ES6+ 的新特性。
          2. TS 中的变量必须先定义再使用，有利于养成良好的编码习惯。
          3. 编码的时候有智能提示，有语法上的问题在编译阶段就报错。
          4. 可以编译成纯 JS 代码（最低编译成ES3）。
          5. 类型系统可以避免很多编码错误。
          6. JS 可以运行的地方都可以使用 TS。
    *缺点：1. 语言比 JS 多了很多概念，学习起来更困难。
          2. TS 对于小型项目会增加一些编码成本（定义文件之类的）。
　

### 10. 描述引用计数的工作原理和优缺点

　
**答**
    *工作原理：引用计数就是在引用关系发生改变的时候，改变计数，在引用数为0的时 
             候会立即回收。
    *优点： 可以在发现垃圾的时候立即回收，最大限度减少程序暂停，内存在内存占用空间超过一定限度的时候会立马清理垃圾，多以不会有内存占满的时候。
    *缺点： 不可以清除互相引用的对象，而且因为要维护引用数，所以时间开销比较大。
　

### 11. 描述标记整理算法的工作流程

　
**答**
    *标记整理算法的工作流程包括两个阶段：标记和清除整理
    *标记阶段：会遍历所有对象找到活动的对象进行标记。
    *清除阶段：会把未标记的对象进行清除操作，把标记的对象进行整理，放在一起，这样节省出来的空间就不是碎片化的空间，在后续代码运行时候可以申请一整个连续的空间。
　

### 12.描述V8中新生代存储区垃圾回收的流程

　
**答**
    新生代对象分为 From 和 To 等大小的两部分，存储的是存活时间较短的对象，回收过程中采用复制算法和标记整理，使用空间为 From ，空闲空间为 To，活动对象存储在From 空间里，当 From 空间超过一定限度之后，开始进行标记整理操作，将活动对象拷贝至 To空间， 再将 From 空间进行完全的释放，释放完将 From 和 To 空间对调，这时候以前的 To 变为 From，以前的 From 变成 To，再由此循环。如果一轮GC操作后还存活的对象将移到老生代区，或者 To 的占用空间超过25%的时候会将 To 的对象都移动到老生代。
　

### 13. 描述增量标记算法在何时使用及工作原理

**答**
    标记增量一般用在老生代区，为了提高代码的执行效率（在垃圾回收时候代码是不会运行的，所以会出现卡顿）
    工作原理：让垃圾回收和代码执行交替进行，比如第一次便利第一层可达对象之后，去执行代码，一段时间过后再回来继续标记，再去代码执行，如此循环。
　

　